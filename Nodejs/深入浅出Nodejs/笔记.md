# 深入浅出 Node.js
## 序一
> 高性能，高并发上有 **极大** 的优势

淘宝在 **2011** 年已经在部分生产系统中开始使用 Node.js。 
他们为了树立技术品牌，所以创办了 CNode 开源技术社区（CNodeJS.org）。
## 序二
Node 诞生于 **2009** 年，作者： **Ryan Dahl** 利用 Google 的 **V8** 引擎打造了基于事件循环的异步 I/O 框架。

Ryan Dahl 是一名资深的 C/C++ 程序员。
Lkindin 的移动平台已经从 Ruby 迁移到 Node，机器数量缩减到原来的1/10.
Yahoo， Microsoft这样的大公司，有好多应用也迁移到 Node上了。
国内的阿里巴巴，腾讯，百度，网易很多线上产品也纷纷用 Node 开发。并且取得了很好的效果。
## 前言
其实，Nodejs 不是第一种服务器端 JS， **1994** 年就有了最早的服务器端 js：LiveWire
## Node简介
### 1.3 Node 给 JS 带来的意义
浏览器除了有 V8 作为 **JS 引擎**外，还有 **Webkit 布局引擎**。

> JS 作为一门图灵完备的语言，长久以来却限制在浏览器的 *沙箱* 中运行，它的能力取决于浏览器中间层提供的支持有多少。
![Chrome浏览器和Node的组件构成](http://www.ituring.com.cn/figures/2013/Node.js/05.d01z.01.png)
Node 也是可以像 Web Workers 一样玩转多进程的。
### 1.4 Node的特点
#### 异步 I/O
```
var fs = require('fs');
fs.readFile('/path', function (err, file) {
console.log('读取文件完成')
});
console.log('发起读取文件');
```
#### 事件与回调函数
#### 单线程
Node 保持了 JS 在浏览器中 **单线程** 的特点。

而且在 Node 中， JS 与其余线程是无法共享任何状态的。
兼容 Windows 和 *gix 平台主要得益于 Node 在架构层面的改动。它在操作系统与 Node 上层模块系统之间构建起了一层平台层架构。即 libuv。
### 1.5 Node 的应用场景
#### 1.5.1 IO 密集型
#### 1.5.2 是否不擅长 CPU 密集型业务
## 第二章 模块机制
### 2.2 Node 的模块实现
在 Node 中引入模块，需要经历如下 3 个步骤。
1. 路径分析
2. 文件定位
3. 编译执行
在 Node 中，模块分类两类：
- Node提供的模块，称为 **核心模块**
  > 核心模块部分在Node源代码的编译过程中，编译进了二进制执行文件。在Node进程启动
时，部分核心模块就被直接加载进内存中，所以这部分核心模块引入时，文件定位和编
译执行这两个步骤可以省略掉，并且在路径分析中优先判断，所以它的加载速度是最
快的。
- 用户编写的模块，称为 **文件模块**
#### 2.2.1 优先从缓存加载
与前端浏览器会缓存静态脚本文件以提高性能一样， Node 对引入过的模块都会进行缓存，以减少二次引入时的开销。
无论是核心谋爱还是文件模块， require() 方法对于相同模块的二次加载一律采用缓存优先的方式。






